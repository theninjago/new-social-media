(JS FROM CANVAS â€” truncated in this example for space)